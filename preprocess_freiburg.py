import numpy as np
import quaternion
import argparse

if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='Preprocess incompatible freiburg')
    parser.add_argument('filename', type=str, help='input filename[.freiburg]')
    parser.add_argument('--type', default='infinitam')

    args = parser.parse_args()

    poses = []
    with open(args.filename) as f:
        lines = f.readlines()

    if args.type == 'infinitam':
        with open(args.filename[:-9] + '_processed.freiburg', 'w') as f:
            f.write('# generated by preprocess_freiburg.py\n')
            for i, line in enumerate(lines):
                f.write('{} {}'.format(i, line))
    else: # elasticfusion
        with open(args.filename[:-9] + '_processed.freiburg', 'w') as f:
            f.write('# generated by preprocess_freiburg.py\n')
            for i, line in enumerate(lines):
                f.write('{} {}'.format(i, ' '.join(line.split(' ')[1:])))
